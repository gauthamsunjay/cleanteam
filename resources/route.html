<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="jslibs/jquery-2.2.2.min.js"></script>

    <link rel="stylesheet" href="csslibs/bootstrap.min.css">
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css">
    <link rel="stylesheet" href="csslibs/MarkerCluster.Default.css">
    <link rel="stylesheet" href="csslibs/MarkerCluster.css">
    <link rel="stylesheet" href="csslibs/leaflet-routing-machine.css">


    <script src="jslibs/bootstrap.min.js"></script>
    <script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
    <script src="jslibs/leaflet.markercluster.js"></script>
    <script src="jslibs/leaflet-routing-machine.js"></script>

    <script src="js/markers.js"></script>

    <title>Visualize Optimal Routes</title>

    <script>
        $('document').ready(function() {
            MARKERS = MarkersFactory(50, 20);
            $.getJSON('../route1', function(data) {
                console.log(data);
                map = L.map('plot').setView([12.97, 77.6], 12);
                position = L.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",{maxZoom : 18,}).addTo(map);
                routing = L.Routing.control({
                    waypoints : data,
                    collapsible : true,
                    plan : L.Routing.plan(data, {
                        createMarker : function(i, wp, n) {
                            console.log([i,n]);
                            if (i == 0) {
                                return L.marker(wp.latLng, {icon:MARKERS.largeGreenIcon,});
                            } else if (i == n-1) {
                                return L.marker(wp.latLng, {icon:MARKERS.largeRedIcon,});
                            }
                            return L.marker(wp.latLng, {icon:MARKERS.smallYellowIcon,});
                        },
                        addWaypoints : false,
                        draggableWaypoints : false,
                    }),
                    lineOptions : {
                        styles : [{
                            color : 'green',
                            opacity : 1,
                            weight : 2,
                        },],
                    },
                    show : false,
                    waypointMode : "snap",
                }).addTo(map);
            });

        });
    </script>
</head>
<body>
    <div class="container">
        <div class="col-md-12">
            <h1 class="page-header" style="margin-top:10px">View Optimal route for collection of waste</h1>
            <div class="well well-sm">
                <p style="font-size:20px;">We narrowed on our <strong>optimal route using
                an evolving algorithm</strong> based on the <strong>data of previous 20 days !</strong></p>
            </div>
            <div class="col-md-12"> <br></div>
        </div>

        <div class="col-md-12"> <br></div>

        <div id="plot" class="col-md-12" style="height : 370px">
        </div>

        <div class="col-md-12"><br><br></div>
    </div>

</body>
</html>
